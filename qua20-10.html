<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
<title>üíñ M√≥n qu√† 20/10 üíê</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Quicksand:wght@400;700&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    padding: 0;
    height: 100vh; /* Gi·ªØ c·ªë ƒë·ªãnh chi·ªÅu cao m√†n h√¨nh */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
    font-family: 'Quicksand', sans-serif;
    text-align: center;
    overflow: hidden; /* QUAN TR·ªåNG: NgƒÉn cu·ªôn trang */
    position: relative;
    perspective: 1000px;
    transition: opacity 700ms ease-in, transform 700ms ease-in;
    opacity: 0;
    transform: scale(0.95);
    will-change: opacity, transform; 
}
body.fade-in {
    opacity: 1;
    transform: scale(1);
}

/* √î nh·∫≠p t√™n */
#name-input-container {
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    opacity: 1;
    transform: translateY(0);
    z-index: 10;
}
#name-input-container.fade-out-name {
    opacity: 0;
    transform: translateY(-20px);
}
#input-wrapper {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}
#name-input-container input {
    padding: 10px 15px;
    border-radius: 25px;
    border: 2px solid #ff69b4;
    font-size: 16px;
    font-family: 'Quicksand', sans-serif;
    width: 200px;
    transition: all 0.3s ease;
}
#name-input-container input:focus {
    outline: none;
    border-color: #ff1493;
    box-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
    transform: scale(1.01);
}

/* üåü N√∫t ‚ÄúNh·∫≠n qu√†‚Äù nh·∫•p nh√°y v√† run run */
#name-input-container button {
    background-color: #ff69b4;
    color: white;
    cursor: pointer;
    font-weight: 700;
    width: 200px;
    border: none;
    outline: none;
    border-radius: 25px;
    padding: 10px 15px;
    font-family: 'Quicksand', sans-serif;
    box-shadow: 0 0 15px rgba(255,105,180,0.7);
    animation: pinkPulse 1.5s infinite alternate ease-in-out,
                softShake 4s infinite ease-in-out;
    transition: all 0.3s ease;
}
#name-input-container button:hover {
    background-color: #ff1493;
    transform: scale(1.08);
    box-shadow: 0 0 25px rgba(255,20,147,0.8);
}

/* üíó Nh·∫•p nh√°y nh·∫π */
@keyframes pinkPulse {
    0% { box-shadow: 0 0 10px rgba(255,105,180,0.4); }
    100% { box-shadow: 0 0 25px rgba(255,20,147,0.9); }
}

/* üíû Run run nh·∫π */
@keyframes softShake {
    0%, 100% { transform: translate(0, 0); }
    25% { transform: translate(-1px, 1px); }
    50% { transform: translate(1px, -1px); }
    75% { transform: translate(-1px, -1px); }
}

/* üéÅ H·ªôp qu√† */
#gift-box {
    width: 280px;
    cursor: pointer;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.7s ease-in-out;
    display: none;
    border-radius: 10px;
    box-shadow: 0 10px 15px rgba(0,0,0,0.2);
    z-index: 5;
}
#gift-box.fade-in-gift {
    opacity: 1;
    transform: scale(1);
    animation: pulse 2s infinite ease-in-out;
}
@keyframes pulse {
    0%{transform:scale(1);}
    50%{transform:scale(1.05);}
    100%{transform:scale(1);}
}

/* üí¨ G·ª£i √Ω nh·∫•n h·ªôp qu√† */
#note {
    margin-top: 20px;
    font-size: 17px;
    color: #b80050;
    font-weight: 600;
    text-shadow: 0 0 6px rgba(255,105,180,0.6);
    opacity: 0;
    transition: opacity 1s ease-in;
    z-index: 5;
}
#gift-box.fade-in-gift + #note {
    opacity: 1;
}

/* üíå THI·ªÜP (ƒê√É CH·ªàNH R·ªòNG H∆†N) */
#card {
    display: none;
    background: #fffafc;
    border-radius: 25px;
    border: 10px solid #f8bbd0;
    box-shadow: 0 0 25px rgba(255,105,180,0.4);
    padding: 35px 25px;
    width: 90%; /* TƒÉng ƒë·ªô r·ªông tr√™n mobile */
    max-width: 650px; /* ƒê√É TƒÇNG: Thi·ªáp r·ªông h∆°n tr√™n desktop/tablet */
    text-align: center;
    opacity: 0;
    transform: scale(0.9) rotateY(30deg);
    position: relative;
    z-index: 10;
    margin: 20px auto;
}
#card.show {
    display: block;
    animation: cardSlideIn 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}
@keyframes cardSlideIn {
    from { transform: translateY(30px) scale(0.8) rotateY(-90deg); opacity: 0; }
    to { transform: translateY(0) scale(1) rotateY(0deg); opacity: 1; }
}

/* ƒê√É TƒÇNG C·ª† CH·ªÆ TI√äU ƒê·ªÄ */
#card h1 {
    color: #b80050;
    font-family: 'Playfair Display', serif;
    font-size: 42px; /* ƒê√É TƒÇNG */
    margin: 10px 0 15px 0;
}

/* üåü GIF D·ªÑ TH∆Ø∆†NG */
.gif-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 0 20px 0;
    animation: fadeInGif 1.5s ease-in-out forwards;
}
.card-gif {
    width: 120px;
    height: auto;
    border-radius: 25px;
    border: 3px solid #ffc0cb; 
    box-shadow: 0 0 15px rgba(255,105,180,0.6);
    animation: gifFloat 3s ease-in-out infinite;
}
@keyframes gifFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
}
@keyframes fadeInGif {
    from { opacity: 0; transform: scale(0.8); }
    to { opacity: 1; transform: scale(1); }
}

/* ‚ú® THAY ƒê·ªîI: CSS CH·ªÆ VI·∫æT TAY CHO N·ªòI DUNG THI·ªÜP (ƒê√É TƒÇNG C·ª† CH·ªÆ) */
#card p {
    font-size: 21px; /* ƒê√É TƒÇNG C·ª† CH·ªÆ */
    color: #333;
    line-height: 1.8;
    width: 90%;
    margin: 0 auto;
    text-align: left; 
    font-family: 'Dancing Script', cursive; 
    font-weight: 700;
    text-shadow: 0 0 1px rgba(0,0,0,0.1); 
}
#card p strong { color: #ff3385; }

.line { 
    display: block; 
    margin-bottom: 15px; /* Gi√£n d√≤ng */
    min-height: 25px; /* Gi·ªØ kho·∫£ng c√°ch khi ch∆∞a c√≥ n·ªôi dung */
}

/* ‚ú® HI·ªÜU ·ª®NG TEXT GLOW CHO CH·ªÆ K√ù */
.signature {
    margin-top: 25px;
    font-family: 'Playfair Display', serif;
    font-size: 22px;
    color: #b80050;
    animation: textGlow 2s infinite alternate ease-in-out;
}
@keyframes textGlow {
    0% { text-shadow: 0 0 5px rgba(255, 105, 180, 0.5); }
    100% { text-shadow: 0 0 10px rgba(255, 51, 133, 0.8), 0 0 20px rgba(255, 150, 200, 0.3); }
}


/* Trang tr√≠ */
.deco-flower {
    position: absolute;
    font-size: 25px;
    color: #ff80ab;
    opacity: 0;
    animation: decoAppear 2s ease-out forwards;
}
@keyframes decoAppear {
    0%{opacity:0;transform:scale(0.5) rotate(0deg);}
    100%{opacity:1;transform:scale(1) rotate(10deg);}
}
#deco-tl{top:10px;left:10px;}
#deco-tr{top:10px;right:10px;}
#deco-bl{bottom:10px;left:10px;}
#deco-br{bottom:10px;right:10px;}

/* üéä HI·ªÜU ·ª®NG CONFETTI */
.confetti-piece {
    position: absolute;
    width: 10px;
    height: 10px;
    background: #ffc0cb;
    opacity: 0;
    border-radius: 50%;
    animation: fall 3s infinite;
    pointer-events: none;
    z-index: 100;
    will-change: transform, opacity; 
}
.confetti-piece:nth-child(even) { background: #ffe5b4; }
.confetti-piece:nth-child(3n) {
    background: #b0e0e6;
    width: 5px;
    height: 15px;
    border-radius: 2px;
}
@keyframes fall {
    0% { transform: translate3d(0, -100px, 0) rotate(0deg); opacity: 1; }
    100% { transform: translate3d(0, 100vh, 0) rotate(720deg); opacity: 0.5; }
}

/* ‚ù§Ô∏è HI·ªÜU ·ª®NG TR√ÅI TIM R∆†I */
.heart-fall {
    position: absolute;
    font-size: 25px;
    color: #ff3385;
    opacity: 0;
    animation: heartFall 8s linear infinite; 
    pointer-events: none;
    z-index: 0;
    text-shadow: 0 0 5px rgba(255,51,133,0.5);
    will-change: transform, opacity; 
}

@keyframes heartFall {
    0% {
        transform: translate3d(var(--x, 0px), -10vh, 0) scale(0.5);
        opacity: 0;
    }
    10% {
        opacity: 0.8;
    }
    100% {
        transform: translate3d(var(--x, 0px), 100vh, 0) scale(1.2);
        opacity: 0;
    }
}

/* üí• HI·ªÜU ·ª®NG TR√ÅI TIM B·∫¨T L√äN KHI CLICK */
.click-heart {
    position: fixed; 
    font-size: 30px;
    animation: popUpHeart 1s ease-out forwards;
    pointer-events: none;
    z-index: 101; 
    user-select: none;
    transform: translate(-50%, -50%); 
    will-change: transform, opacity;
}

.click-heart.pink { color: #ff1493; text-shadow: 0 0 8px rgba(255,20,147,0.7); }
.click-heart.red { color: #e91e63; text-shadow: 0 0 8px rgba(233,30,99,0.7); }
.click-heart.purple { color: #9c27b0; text-shadow: 0 0 8px rgba(156,39,176,0.7); }
.click-heart.orange { color: #ff9800; text-shadow: 0 0 8px rgba(255,152,0,0.7); }
.click-heart.yellow { color: #ffeb3b; text-shadow: 0 0 8px rgba(255,235,59,0.7); }

@keyframes popUpHeart {
    0% {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 1;
    }
    50% {
        transform: translate3d(-50%, -100%, 0) scale(1.2); 
        opacity: 0.9;
    }
    100% {
        transform: translate3d(-50%, -200%, 0) scale(0.8);
        opacity: 0;
    }
}

/* ‚ú® HI·ªÜU ·ª®NG L·∫§P L√ÅNH CHO THI·ªÜP */
/* CSS cho l·∫•p l√°nh thi·ªáp (c·∫ßn th√™m n·∫øu mu·ªën) */
.card-sparkle {
    position: fixed; 
    width: 6px;
    height: 6px;
    background-color: #ffd700;
    border-radius: 50%;
    box-shadow: 0 0 5px #ffd700;
    opacity: 0;
    animation: sparkleEffect 1.5s ease-out forwards;
    pointer-events: none;
    z-index: 102;
}

@keyframes sparkleEffect {
    0% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 1; transform: scale(1.5); }
    100% { opacity: 0; transform: scale(0.8); }
}

</style>
</head>
<body>

<audio id="bg-music" loop>
    <source src="background_music.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>
<audio id="open-sound">
    <source src="gift_open_sound.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<div id="name-input-container">
    <div id="input-wrapper">
        <input type="text" id="recipient-name" placeholder="Nh·∫≠p t√™n">
    </div>
    <button id="start-btn">üéÅ Nh·∫≠n qu√†</button>
</div>

<img id="gift-box" src="1.jpg" alt="H·ªôp qu√†">
<div id="note">üí¨ Nh·∫•n v√†o h·ªôp qu√† ƒë·ªÉ m·ªü nh√© üíñ</div>

<div id="card">
    <div class="deco-flower" id="deco-tl">üå∏</div>
    <div class="deco-flower" id="deco-tr">üå∏</div>
    <div class="deco-flower" id="deco-bl">üå∏</div>
    <div class="deco-flower" id="deco-br">üå∏</div>

    <h1>üå∑üíñ Ch√∫c M·ª´ng 20/10 üíêüå∏</h1>

    <div class="gif-container">
        <img src="giphyabc.gif" alt="·∫¢nh gif d·ªÖ th∆∞∆°ng" class="card-gif">
    </div>

    <p>
        <span class="line" data-text="Th√¢n g·ª≠i **[name]** y√™u qu√Ω!"></span>
        <span class="line" data-text="T·∫∑ng nh·ªØng b√¥ng hoa r·ª±c r·ª° nh·∫•t cho ng∆∞·ªùi ph·ª• n·ªØ tuy·ªát v·ªùi nh·∫•t! üíêüå∑"></span>
        <span class="line" data-text="üåπ Nh√¢n ng√†y 20/10, xin g·ª≠i l·ªùi ch√∫c t·ªët ƒë·∫πp nh·∫•t t·ªõi **[name]**."></span>
        <span class="line" data-text="üå∏ Ch√∫c **[name]** lu√¥n vui v·∫ª, kh·ªèe m·∫°nh, tr·∫ª trung v√† xinh ƒë·∫πp. üå∏"></span>
        <span class="line" data-text="‚ú® Ch√∫c **[name]** g·∫∑t h√°i nhi·ªÅu th√†nh c√¥ng v√† lu√¥n h·∫°nh ph√∫c. ‚ú®"></span>
        <span class="line" data-text="üíñ Mong n·ª• c∆∞·ªùi r·∫°ng r·ª° lu√¥n n·ªü tr√™n m√¥i **[name]** m·ªói ng√†y."></span>
        <span class="line" data-text="üéÅ H√£y t·∫≠n h∆∞·ªüng ng√†y ƒë·∫∑c bi·ªát n√†y th·∫≠t tr·ªçn v·∫πn nh√©!"></span>
        <span class="line" data-text="üíï Ch√∫c **[name]** h·ªçc gi·ªèi, v√† m√£i l√† c√¥ g√°i tuy·ªát v·ªùi c·ªßa 12A11!"></span>
        <span class="line" data-text="üíê Ch√∫c **[name]** c√≥ m·ªôt ng√†y 20/10 th·∫≠t √Ω nghƒ©a v√† ng·∫≠p tr√†n ni·ªÅm vui b√™n nh·ªØng ng∆∞·ªùi th√¢n y√™u! üíê"></span>
    </p>

    <div class="signature">T·∫≠p th·ªÉ nam sinh 12A11 g·ª≠i t·∫∑ng</div>
</div>

<script>
const giftBox = document.getElementById('gift-box');
const card = document.getElementById('card');
const note = document.getElementById('note');
// L·∫•y th·∫ª <p> l√†m m·ª•c ti√™u cu·ªôn
const cardContentContainer = document.querySelector('#card p');
const lines = Array.from(document.querySelectorAll('.line')).filter(el => el.hasAttribute('data-text'));
const nameInputContainer = document.getElementById('name-input-container');
const recipientNameInput = document.getElementById('recipient-name');
const startBtn = document.getElementById('start-btn');
const bgMusic = document.getElementById('bg-music');
const openSound = document.getElementById('open-sound');
const heartColors = ['pink', 'red', 'purple', 'orange', 'yellow']; 

// T·ªëi ∆∞u h√≥a: Gi·ªõi h·∫°n t·ªëc ƒë·ªô t·∫°o tr√°i tim khi click
let lastClickTime = 0;
const clickThrottle = 100; // 100ms: Ch·ªâ cho ph√©p t·∫°o 1 tr√°i tim m·ªói 100ms

// Hi·ªáu ·ª©ng g√µ ch·ªØ, gi·ªØ nguy√™n <strong>
function typeLine(element, htmlText, delay = 55) { 
    return new Promise(resolve => {
        element.innerHTML = '';
        const temp = document.createElement('div');
        temp.innerHTML = htmlText;
        const nodes = Array.from(temp.childNodes); 

        function typeNode(index = 0, charIndex = 0) {
            if (index >= nodes.length) {
                resolve();
                return;
            }

            const node = nodes[index];
            if (node.nodeType === Node.TEXT_NODE) {
                element.innerHTML += node.textContent.charAt(charIndex);
                charIndex++;
                if (charIndex < node.textContent.length) {
                    const nextDelay = (node.textContent.charAt(charIndex-1).match(/[.!?]/)) ? delay*8 : delay;
                    setTimeout(() => typeNode(index, charIndex), nextDelay);
                } else {
                    typeNode(index + 1, 0);
                }
            } else if (node.nodeType === Node.ELEMENT_NODE && node.tagName === 'STRONG') {
                const strongEl = document.createElement('strong');
                element.appendChild(strongEl);
                function typeStrong(charIdx = 0) {
                    strongEl.textContent += node.textContent.charAt(charIdx);
                    charIdx++;
                    if (charIdx < node.textContent.length) {
                        const nextDelay = (node.textContent.charAt(charIdx-1).match(/[.!?]/)) ? delay*8 : delay;
                        setTimeout(() => typeStrong(charIdx), nextDelay);
                    } else {
                        typeNode(index + 1, 0);
                    }
                }
                typeStrong();
            }
        }

        typeNode();
    });
}

// Tr√°i tim click
function createClickHeart(x, y) {
    const heart = document.createElement('span');
    heart.classList.add('click-heart');
    const randomColor = heartColors[Math.floor(Math.random() * heartColors.length)];
    heart.classList.add(randomColor);
    heart.innerHTML = 'üíñ';
    heart.style.left = `${x}px`;
    heart.style.top = `${y}px`;
    document.body.appendChild(heart);
    heart.addEventListener('animationend', () => heart.remove());
}

// L·∫•p l√°nh tr√™n thi·ªáp (c·∫ßn th√™m CSS cho .card-sparkle n·∫øu ch∆∞a c√≥)
function createCardSparkles() {
    const numSparkles = 15; 
    const cardRect = card.getBoundingClientRect();
    for (let i = 0; i < numSparkles; i++) {
        const sparkle = document.createElement('div');
        sparkle.classList.add('card-sparkle');
        const randX = Math.random() * (cardRect.width + 100) - 50; 
        const randY = Math.random() * (cardRect.height + 100) - 50;
        sparkle.style.left = `${cardRect.left + randX}px`;
        sparkle.style.top = `${cardRect.top + randY}px`;
        sparkle.style.animationDelay = `${Math.random() * 0.8}s`; 
        document.body.appendChild(sparkle);
        sparkle.addEventListener('animationend', () => sparkle.remove());
    }
}

// T·ªëi ∆∞u h√≥a: H√†m Rung (Haptic Feedback) cho di ƒë·ªông
function triggerHapticFeedback() {
    if (navigator.vibrate) {
        navigator.vibrate(50); 
    }
}

// N√∫t Nh·∫≠n qu√†
function handleStartButtonClick(event) {
    const name = recipientNameInput.value.trim().replace(/[<>]/g, "");
    if (!name) {
        alert("Vui l√≤ng nh·∫≠p t√™n ng∆∞·ªùi nh·∫≠n! üíñ");
        const x = event.clientX || (event.touches ? event.touches[0].clientX : 0);
        const y = event.clientY || (event.touches ? event.touches[0].clientY : 0);
        if (x && y) createClickHeart(x, y);
        return;
    }
    
    triggerHapticFeedback(); 

    // Hi·ªáu ·ª©ng tr√°i tim
    const rect = startBtn.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    [0, 100, 200].forEach(t => setTimeout(() => createClickHeart(centerX, centerY), t));

    // Thay [name] b·∫±ng t√™n ng∆∞·ªùi nh·∫≠p
    lines.forEach(line => {
        let content = line.getAttribute('data-text');
        content = content.replace(/\*\*\[name\]\*\*/g, `**${name}**`).replace(/\[name\]/g, `**${name}**`);
        line.setAttribute('data-text', content);
        line.innerHTML = '';
    });

    nameInputContainer.classList.add("fade-out-name");
    if (bgMusic.paused) bgMusic.play().catch(() => {});
    setTimeout(() => {
        nameInputContainer.style.display = "none";
        giftBox.style.display = "block";
        setTimeout(() => giftBox.classList.add("fade-in-gift"), 10);
        note.textContent = `üí¨ Nh·∫•n v√†o h·ªôp qu√† ƒë·ªÉ m·ªü, ${name} üíñ`;
    }, 500);
}

// HI·ªÇN TH·ªä THI·ªÜP V√Ä G√ï CH·ªÆ (ƒê√É X√ìA HI·ªÜU ·ª®NG CU·ªòN)
async function showCardContent() {
    createCardSparkles();
    setTimeout(createConfetti, 500);

    // ƒê·∫£m b·∫£o body v·∫´n cƒÉn gi·ªØa v√† KH√îNG CU·ªòN
    document.body.style.justifyContent = 'center'; 
    document.body.style.alignItems = 'center';
    document.body.style.overflow = 'hidden'; 
    
    for (const line of lines) {
        const htmlText = line.getAttribute('data-text').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        await typeLine(line, htmlText); 
        
        // **KH√îNG C√ì CU·ªòN**
        
        await new Promise(resolve => setTimeout(resolve, 600)); // Ngh·ªâ 0.6s gi·ªØa c√°c d√≤ng
    }
}

startBtn.addEventListener('click', handleStartButtonClick);
startBtn.addEventListener('touchstart', handleStartButtonClick);

// T·ªëi ∆∞u h√≥a: Th√™m Throttle (gi·ªõi h·∫°n t·ªëc ƒë·ªô) cho hi·ªáu ·ª©ng tr√°i tim click
document.addEventListener('click', e => {
    const now = Date.now();
    if (e.target !== startBtn && e.target !== giftBox && e.target !== recipientNameInput && now - lastClickTime > clickThrottle) {
        createClickHeart(e.clientX, e.clientY);
        lastClickTime = now;
    }
});

// T·ªëi ∆∞u h√≥a Touch Event (Ch·∫°m)
document.addEventListener('touchstart', e => {
    if (e.target !== startBtn && e.target !== giftBox && e.target !== recipientNameInput) {
        triggerHapticFeedback(); 
    }
    
    const now = Date.now();
    if (e.target !== startBtn && e.target !== giftBox && e.target !== recipientNameInput && now - lastClickTime > clickThrottle) {
        createClickHeart(e.touches[0].clientX, e.touches[0].clientY);
        lastClickTime = now;
    }
}, { passive: true }); 

// T·ªëi ∆∞u h√≥a Confetti
function createConfetti() {
    for (let i = 0; i < 15; i++) {
        const piece = document.createElement('div');
        piece.classList.add('confetti-piece');
        piece.style.left = `${Math.random() * 100}vw`;
        piece.style.width = `${5 + Math.random() * 10}px`;
        piece.style.height = `${5 + Math.random() * 15}px`;
        piece.style.animationDelay = `${-Math.random() * 4}s`;
        piece.style.animationDuration = `${3 + Math.random() * 2}s`;
        document.body.appendChild(piece);
    }
}

// T·ªëi ∆∞u h√≥a Heart Rain
function createInitialHearts(count) {
    for(let i = 0; i < count; i++) {
        const heart = document.createElement('span');
        heart.classList.add('heart-fall');
        heart.innerHTML = '‚ù§Ô∏è';
        heart.style.left = `${Math.random() * window.innerWidth}px`; 
        heart.style.animationDelay = `${-Math.random() * 6}s`; 
        heart.style.animationDuration = `${8 + Math.random() * 4}s`; 
        heart.style.setProperty('--x', `${(Math.random() - 0.5) * 150}px`); 
        document.body.appendChild(heart);
    }
}

function startHeartRain() {
    createInitialHearts(20); 
}


document.addEventListener('DOMContentLoaded', () => {
    document.body.classList.add('fade-in');
    document.body.addEventListener('click', () => {
        if (bgMusic.paused) bgMusic.play().catch(() => {});
    }, { once: true });
    startHeartRain(); 
});

giftBox.addEventListener('click', () => {
    triggerHapticFeedback(); 
    
    note.style.display = "none";
    giftBox.src = "2.png";
    giftBox.style.cursor = "default";
    openSound.play().catch(() => {});
    setTimeout(() => {
        giftBox.style.display = "none";
        card.classList.add("show");
        showCardContent(); // B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng g√µ ch·ªØ v√† KH√îNG CU·ªòN
    }, 800);
});
</script>

</body>
</html>
